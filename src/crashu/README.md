# CrashU - 文件夹相似度检测与批量移动工具

一个基于字符串相似度检测的文件夹批量移动工具，使用漂亮的命令行界面。
（就是输入99ehv的一级画师名， 然后提前把1ehv的移出去）

## 功能特点

- 🔍 **智能相似度检测**：使用 difflib 库计算文件夹名称的相似度
- 📂 **批量处理**：支持多个源文件夹和目标文件夹名称
- 🎨 **美观界面**：使用 Rich 库提供彩色输出和进度条
- ⚡ **安全操作**：移动前显示预览，需要用户确认
- 🛡️ **冲突处理**：自动处理同名文件夹冲突，添加数字后缀
- 📊 **详细报告**：显示匹配的文件夹、路径、相似度等信息

## 安装依赖

```bash
pip install rich
```

## 使用方法

### 运行工具
```bash
python -m crashu
```
或者
```bash
python src/crashu/__main__.py
```

### 使用流程

1. **输入目标文件夹名称**
   - 输入你要查找的文件夹名称（每行一个）
   - 输入空行结束输入
   - 例如：`crash`, `error`, `bug`

2. **输入源文件夹路径**
   - 输入要搜索的源文件夹路径（每行一个）
   - 输入空行结束输入
   - 默认值：`E:\1Hub\EH\1EHV`

3. **输入目标文件夹路径**
   - 输入移动文件夹的目标位置
   - 默认值：`E:\2EHV\crash`

4. **设置相似度阈值**
   - 输入 0-1 之间的数值
   - 默认值：`0.8`（表示80%相似度）

5. **确认操作**
   - 工具会显示找到的相似文件夹列表
   - 确认后执行移动操作

## 使用示例

假设你有以下文件夹结构：
```
E:\1Hub\EH\1EHV\
├── crash_reports/
├── error_logs/
├── bug_fixes/
├── normal_folder/
└── crash_dump/
```

运行工具后：
1. 输入目标名称：`crash`
2. 相似度阈值：`0.6`
3. 工具会找到：
   - `crash_reports` (相似度 0.75)
   - `crash_dump` (相似度 0.67)

移动后的结构：
```
E:\2EHV\crash\
├── crash\
│   ├── crash_reports/
│   └── crash_dump/
```

## 配置说明

### 默认设置
- **默认源路径**：`E:\1Hub\EH\1EHV`
- **默认目标路径**：`E:\2EHV\crash`
- **默认相似度阈值**：`0.8`

### 相似度阈值建议
- `0.9-1.0`：非常严格，几乎完全匹配
- `0.7-0.8`：中等严格，推荐设置
- `0.5-0.6`：较宽松，可能匹配更多文件夹
- `< 0.5`：非常宽松，不推荐

## 功能特性

### 智能冲突处理
如果目标位置已存在同名文件夹，工具会自动添加数字后缀：
- `folder_name`
- `folder_name_1`
- `folder_name_2`
- ...

### 错误处理
- 源文件夹不存在或无法访问时显示错误信息
- 移动操作失败时显示具体错误
- 继续处理其他文件夹，不会因单个错误而中断

### 进度显示
- 扫描阶段显示当前扫描的文件夹
- 移动阶段显示移动进度和当前操作的文件夹

## 注意事项

⚠️ **重要提醒**：
1. 本工具会**移动**文件夹，不是复制！请确保有备份
2. 移动操作不可撤销，请仔细确认预览结果
3. 建议先在测试环境中使用
4. 确保有足够的磁盘空间和权限

## 代码结构

```
crashu/
├── __init__.py
├── __main__.py          # 主程序入口
└── README.md           # 本文档
```

### 主要函数
- `get_similarity(s1, s2)`：计算字符串相似度
- `get_multiline_input(prompt)`：获取多行用户输入
- `main()`：主程序逻辑

## 技术实现

- **相似度算法**：使用 `difflib.SequenceMatcher` 计算字符串相似度
- **用户界面**：使用 `rich` 库提供彩色输出、表格和进度条
- **文件操作**：使用 `shutil.move` 进行文件夹移动

## 许可证

此项目仅供个人使用，请谨慎操作文件系统。

---

**开发日期**：2025年6月4日  
**最后更新**：2025年6月4日
